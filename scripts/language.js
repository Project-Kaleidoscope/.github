/*! MlgmXyysd Language Framework v0.2.1 | Copyright © 2002-2023 MlgmXyysd, © 2013-2023 MeowCat Studio All Rights Reserved */
"use strict";console.log("MlgmXyysd Language Framework v0.2.1");const langDefault="en_US";const langList=["zh_CN"];let mLang=localStorage.getItem("mLang"),language={},LANGUAGE="",langLock=false;const jsLoader=function(sUrl){const _script=document.createElement("script");_script.setAttribute("src",sUrl);document.getElementsByTagName("head")[0].appendChild(_script)};const setLanguage=function(lang){if(langList.indexOf(lang)===-1&&lang!==langDefault){console.log("Error: language is not defined in lang list")}localStorage.setItem("mLang",lang);mLang=lang};const getTranslation=function(key,lang=mLang){key=key.toUpperCase();let translate="&#60;MISSING "+key+"&#62;";if(!langLock){if(language[lang]){if(!language[langDefault][key]||typeof language[langDefault][key]==="undefined"){console.log("Warn: Language "+key+" is not defined in default language")}if(language[lang][key]){translate=language[lang][key]}}else if(language[langDefault]&&lang===mLang){if(language[langDefault][key]){translate=language[langDefault][key]}}}return translate};const fillTranslation=function(){console.log("Filling translation for language "+mLang+"...");let list=document.getElementsByClassName("lang");for(let i=0;i<list.length;i++){if(list[i].getAttribute("language")){list[i].innerHTML=getTranslation(list[i].getAttribute("language"))}}};const loadLanguage=function(key){console.log("Loading language "+key+"...");$.ajax({async:false,dataType:"json",type:"GET",cache:false,url:"assets/language/"+key+".json",success:function(lang){console.log("	Language: "+lang.LANGUAGE+" ("+key+")");console.log("	Translator: "+lang.LANGUAGE_TRANSLATOR);language[key]=lang;console.log(key+" loaded!")},error:function(msg){console.log("Warn: Language "+key+" load failed")}})};jQuery(function(){fillTranslation()});if(langList.indexOf(mLang)===-1){let langAuto=(mLang==="auto");let langCurrent=navigator.language;if(langList.indexOf(langCurrent)===-1){mLang=langDefault}else{mLang=langCurrent}if(!langAuto){setLanguage(mLang)}}if(typeof langDefault!=="string"||typeof langList!=="object"){langLock=true;console.log("Error: Illegal langDefault or langList, have you forgot to define them?");console.log("Error: Language list load failed")}if(!langLock){if(langList.indexOf(langDefault)===-1){loadLanguage(langDefault)}for(let i=0;i<langList.length;i++){if(langList[i]!==langDefault){loadLanguage(langList[i])}}}