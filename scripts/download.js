/*! KaleidoscopeOS Download Center v1.0.5 | Copyright © 2002-2023 MlgmXyysd, © 2013-2023 MeowCat Studio, © 2020-2023 Meow Mobile All Rights Reserved */
"use strict";console.log("KaleidoscopeOS Download Center v1.0.5");var closeDeviceWindow=function(){$(".panel-select-device").show();$("#device_window").hide();$("#device_window").attr("src","");$("#device_data").html("");history.replaceState(null,null,"?")};const getLogo=function(logo){switch(parseInt(logo.type)){case 0:return'<div class="mdui-list-item-icon mdui-icon" style="color: #'+logo.color+';">'+logo.logo+'</div>';case 1:return'<img class="mdui-list-item-icon mdui-icon" src="'+logo.logo+'"/>';default:return""}};const getQuery=function(key){let queries=window.location.search;if(queries!==""){if(queries.startsWith("?")){queries=queries.substr(1)}queries=queries.split("&");for(let i=0;i<queries.length;i++){if(queries[i].startsWith(key)){let result=queries[i].startsWith(key+"=")?queries[i].substr(key.length+1):"";return result===""?true:result}}return false}else{return false}};const isDownloadDrawerOpen=function(){return parseInt($("#download-drawer").css("transform").split(",")[4])>=0};const closeDownloadDrawer=function(){if(isDownloadDrawerOpen()){$("#download-drawer")[0].style.transform="translateX(-320px)";$(".drawer-shadow").hide()}};const openDownloadDrawer=function(){if(!isDownloadDrawerOpen()){$("#download-drawer")[0].style.transform="translateX(0)";$(".drawer-shadow").show()}};const toggleDownloadDrawer=function(){if(isDownloadDrawerOpen()){closeDownloadDrawer()}else{openDownloadDrawer()}};jQuery(function(){$("#loader").fadeOut();$("img").on("dragstart",function(e){e.preventDefault();return false});window.onresize();$.ajax({dataType:"json",type:"GET",cache:false,url:"assets/device/list.json",success:function(list){let query=getQuery("device");$("#device_list").html("");$.each(list,function(k,v){if(v.disabled){return true}let brand=$('<div class="mdui-collapse-item"><div class="mdui-collapse-item-header mdui-list-item mdui-ripple">'+getLogo(v.logo)+'<div class="mdui-list-item-content">'+k+'</div><i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i></div><div class="mdui-collapse-item-body mdui-list"></div></div>');$.each(v.device,function(code,config){if(config.disabled){return true}let device=$('<a class="mdui-list-item mdui-ripple">'+config.name.join(" / ")+'<br/><small>'+code+'</small></a>');device.on("click",function(){$.ajax({dataType:"text",type:"GET",cache:false,url:config.config,success:function(device){history.replaceState(null,null,"?device="+k.toLowerCase()+"/"+code);$("#device_data").html(device);$("#device_window").attr("src","device.html");$("#device_window").show();$(".panel-select-device").hide()},error:function(msg){mdui.snackbar("Fail to load device config.")}});closeDownloadDrawer()});if(typeof query==="string"&&query.toLowerCase()===k.toLowerCase()+"/"+code.toLowerCase()){query="";device.click()}brand.children(".mdui-list").append(device)});$("#device_list").append(brand);mdui.mutation()})},error:function(msg){mdui.snackbar("Fail to load device list.");$("#device_list").html("Fail to load device list.")}})});window.onresize=function(){let a=$("#download-page>div.device-container>div");let b=a.children("img");if(a.height()>=$(window).height()-56){a.css("top","0");a.css("transform","translate(-50%)");b.css("height","200px")}else if($(window).height()>500){a.css("top","50%");a.css("transform","translate(-50%, -50%)");if($(window).width()>500){b.css("height","300px")}else{b.css("height","200px")}}};